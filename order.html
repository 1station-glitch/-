<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>1STATION</title>
<link rel="icon" type="image/png" href="station.png">
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />

<style>
    /* Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø© */
    body { 
        font-family: 'Cairo', sans-serif; 
        margin: 0; 
        padding: 0; 
        direction: rtl; 
        min-height: 100vh; 
        background: linear-gradient(120deg, #0f2027, #2c5364); 
        color: #333; 
        overflow-x: hidden; 
    }

    /* Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
    .container { 
        width: 90%; /* Ø¹Ø±Ø¶ Ù…Ø±Ù† Ù„Ù„Ø¬ÙˆØ§Ù„ */
        max-width: 850px; 
        margin: 30px auto; 
        background: #ffffffee; 
        padding: 30px 20px; /* Ù‡ÙˆØ§Ù…Ø´ Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„Ø¬ÙˆØ§Ù„ */
        border-radius: 20px; 
        box-shadow: 0 10px 30px rgba(0,0,0,0.3); 
        box-sizing: border-box;
    }
    
    /* Ø§Ù„Ø´Ø¹Ø§Ø± */
    .logo-wrapper { display: flex; flex-direction: column; align-items: center; margin-bottom: 15px; }
    .logo-wrapper img { width: 100px; height: 100px; border-radius: 50%; object-fit: cover; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
    .brand-name { margin-top: 10px; font-size: 22px; font-weight: 700; background: linear-gradient(135deg, #6c63ff, #2c5364); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

    /* Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† */
    h2 { margin-bottom: 30px; font-size: 24px; text-align: center; color: #1f1c2c; }
    h3 { font-size: 18px; margin-bottom: 15px; color: #1f1c2c; text-align: center; border-bottom: 2px solid #6c63ff; padding-bottom: 5px; }

    /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø®Ø§Ù†Ø§Øª */
    .form-group { width: 100%; margin-bottom: 15px; }
    label { display: block; font-weight: 600; font-size: 14px; margin-bottom: 5px; text-align: right; margin-right: 5px; }

    /* Ø§Ù„Ø®Ø§Ù†Ø§Øª (Input + Select) */
    input, select, .select2-container .select2-selection--single { 
        width: 100% !important; 
        height: 50px !important; 
        padding: 0 15px; 
        border-radius: 12px !important; 
        border: 1px solid #ccc !important; 
        font-size: 14px !important; 
        background-color: #fff !important;
        box-sizing: border-box;
        font-family: 'Cairo', sans-serif;
    }

    /* ØªØµØºÙŠØ± Ø®Ø§Ù†Ø© Ø´Ø±ÙƒØ© Ø§Ù„Ø´Ø­Ù† Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ù„ØªÙ…ÙŠÙŠØ²Ù‡Ø§ */
    #shippingCompany {
        height: 45px !important; /* Ø§Ø±ØªÙØ§Ø¹ Ø£Ù‚Ù„ Ù‚Ù„ÙŠÙ„Ø§Ù‹ */
        background-color: #f0f4f8 !important; /* Ù„ÙˆÙ† Ù…Ø®ØªÙ„Ù Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ù„ÙŠØ¯Ù„ Ø£Ù†Ù‡Ø§ Ù„Ù„Ø§Ø®ØªÙŠØ§Ø± */
        cursor: pointer;
    }

    input:focus { outline: none; border-color: #6c63ff !important; box-shadow: 0 0 8px rgba(108,99,255,0.3); }

    /* ØªÙ†Ø³ÙŠÙ‚ Select2 Ù„ÙŠÙƒÙˆÙ† Ù…ØªØ¬Ø§ÙˆØ¨ */
    .select2-container { width: 100% !important; }
    .select2-container .select2-selection--single { display: flex !important; align-items: center !important; }
    .select2-container .select2-selection--single .select2-selection__rendered { padding-right: 0 !important; padding-left: 20px !important; color: #333 !important; }
    .select2-container .select2-selection--single .select2-selection__arrow { height: 100% !important; top: 0 !important; left: 10px !important; }
    
    /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
    button { 
        width: 100%; 
        padding: 15px; 
        border-radius: 12px; 
        border: none; 
        cursor: pointer; 
        font-size: 16px; 
        font-weight: bold; 
        margin-top: 10px; 
        background: linear-gradient(135deg, #6c63ff, #3f3d56); 
        color: white; 
        transition: all 0.3s ease; 
    }
    button:active { transform: scale(0.98); }

    /* Ø§Ù„Ù…ÙˆØ¯Ø§Ù„Ø§Øª */
    #thankYouModal, #branchesModal, #shippingTypeModal, #aramexWarningModal { display: none; position: fixed; z-index: 9999; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.8); backdrop-filter: blur(2px); }
    #thankYouModalContent, #branchesModalContent, #shippingTypeContent, #aramexWarningContent { 
        background-color: #fff; 
        margin: 15vh auto; /* ØªÙˆØ³Ø· Ø¹Ù…ÙˆØ¯ÙŠ Ø£ÙØ¶Ù„ Ù„Ù„Ø¬ÙˆØ§Ù„ */
        padding: 25px; 
        border-radius: 20px; 
        width: 90%; /* Ø¹Ø±Ø¶ ÙƒØ§Ù…Ù„ ÙÙŠ Ø§Ù„Ø¬ÙˆØ§Ù„ */
        max-width: 400px; 
        text-align: center; 
        color: #1f1c2c; 
        box-shadow: 0 10px 25px rgba(0,0,0,0.4); 
        max-height: 80vh;
        overflow-y: auto;
    }

    /* Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø´Ø­Ù† */
    .shipping-option { display:flex; flex-direction:column; align-items:center; justify-content:center; border: 2px solid #6c63ff; border-radius: 15px; padding: 15px; margin: 10px 0; cursor:pointer; transition: all 0.2s ease;}
    .shipping-option:hover, .shipping-option.selected { background: #6c63ff; color:white; }
    .shipping-option .icon { font-size: 30px; margin-bottom: 5px;}
    
    /* ØµÙˆØ± Ø§Ù„Ø´Ø±ÙƒØ§Øª */
    .company-images { display:flex; justify-content:center; gap:15px; margin-top:15px; flex-wrap:wrap;}
    .company-images img { width:80px; height:80px; border-radius:12px; border:2px solid #6c63ff; cursor:pointer; object-fit: contain; padding: 5px; background: #fff;}
    
    /* Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ */
    .note, .warning { width: 100%; padding: 10px; border-radius: 10px; font-size: 13px; display: none; text-align: center; margin-top: 10px; box-sizing: border-box; }
    .note { background: #e0f7fa; border: 1px solid #00acc1; color: #006064; }
    .warning { background: #ffebee; border: 1px solid #d32f2f; color: #b71c1c; }

    /* Ù…ÙŠØ¯ÙŠØ§ ÙƒÙˆÙŠØ±ÙŠ Ø®Ø§Øµ Ø¬Ø¯Ø§Ù‹ Ù„Ù€ iPhone SE ÙˆØ§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
    @media only screen and (max-width: 380px) {
        .container { padding: 20px 15px; margin: 15px auto; width: 95%; }
        h2 { font-size: 20px; margin-bottom: 20px; }
        .logo-wrapper img { width: 80px; height: 80px; }
        input, select { font-size: 13px !important; }
        button { font-size: 14px; padding: 12px; }
        /* ØªØµØºÙŠØ± Ø¥Ø¶Ø§ÙÙŠ Ù„Ø®Ø§Ù†Ø© Ø§Ù„Ø´Ø­Ù† ÙÙŠ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© Ø¬Ø¯Ø§Ù‹ */
        #shippingCompany { height: 42px !important; font-size: 13px !important; }
    }
</style>
</head>

<body>

<div id="aramexWarningModal">
  <div id="aramexWarningContent">
    <h3 style="margin-bottom:10px; color:#d32f2f;">âš ï¸ ØªÙ†Ø¨ÙŠÙ‡ Ù‡Ø§Ù… â€“ Ø£Ø±Ø§Ù…ÙƒØ³</h3>
    <p style="line-height:1.6; font-size:14px; text-align: right;">
      ÙŠØ±Ø¬Ù‰ <strong>ØªØºÙ„ÙŠÙ Ø§Ù„Ø´Ø­Ù†Ø© Ø¬ÙŠØ¯Ù‹Ø§</strong> ÙˆØ·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¨ÙˆÙ„ÙŠØµØ© ÙˆÙ„ØµÙ‚Ù‡Ø§ Ù„Ø¶Ù…Ø§Ù† Ù‚Ø¨ÙˆÙ„Ù‡Ø§ ÙÙŠ Ø§Ù„ÙØ±Ø¹.<br><br>
      Ù„ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø´Ø­Ù†Ø©: ØªÙˆØ¬Ù‡ Ù„Ø£Ù‚Ø±Ø¨ ÙØ±Ø¹.<br>
      Ù„Ù„Ø§Ø³ØªÙ„Ø§Ù… Ù…Ù† Ù…ÙˆÙ‚Ø¹Ùƒ: ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø£Ø±Ø§Ù…ÙƒØ³ ÙˆØ±ÙØ¹ Ø·Ù„Ø¨ Ø§Ø³ØªÙ„Ø§Ù….<br><br>
      <strong>â° Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„:</strong><br>
      Ø§Ù„Ø£Ø­Ø¯ - Ø§Ù„Ø®Ù…ÙŠØ³: 8:30 Øµ â€“ 4:30 Ù…<br>
      Ø§Ù„Ø¬Ù…Ø¹Ø©: Ù…ØºÙ„Ù‚
    </p>
    <button onclick="confirmAramexWarning()" style="margin-top:15px; background: #d32f2f;">ÙÙ‡Ù…Øª â€“ Ù…ØªØ§Ø¨Ø¹Ø©</button>
  </div>
</div>

<div style="padding: 15px;">
    <a href="index.html" style="text-decoration: none; color: white; font-weight: bold; font-size: 16px; display: flex; align-items: center;">
        <span style="font-size: 20px; margin-left: 5px;">&#8594;</span> Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
    </a>
</div>

<div class="container">
  <div class="logo-wrapper">
    <img src="station.png" alt="Logo">
    <div class="brand-name">1STATION</div>
  </div>

  <h2>Ø¥ØµØ¯Ø§Ø± Ø¨ÙˆÙ„ÙŠØµØ© Ø§Ù„Ø´Ø­Ù†</h2>

  <form id="shippingForm">
  
    <h3>Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø±</h3>
    <div class="form-group">
      <label>Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ù…Ø³Ø¬Ù„</label>
      <input type="text" name="store_name" required placeholder="Ù…Ø«Ø§Ù„: Ù…ØªØ¬Ø± Ø§Ù„Ø£Ù†Ø§Ù‚Ø©">
      <div style="margin-top: 8px; font-size: 12px; color: #b45309; background: #fffbeb; padding: 8px; border-radius: 8px; border: 1px solid #fcd34d; text-align: center;">
          âš ï¸ ÙŠØ±Ø¬Ù‰ <a href="store_register.html" style="color: #b45309; text-decoration: underline; font-weight: bold;">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…ØªØ¬Ø±</a>   Ø£ÙˆÙ„Ø§Ù‹ Ø«Ù… Ø§Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ù…Ø³Ø¬Ù„ Ù‡Ù†Ø§
      </div>
    </div>

    <h3>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„</h3>
    <div class="form-group">
      <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
      <input type="text" name="receiver_name" required>
    </div>
    <div class="form-group">
      <label>Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ (05xxxxxxx)</label>
      <input type="tel" name="receiver_phone" pattern="[0-9]*" inputmode="numeric" required>
    </div>
    
    <div class="form-group">
        <label>Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</label>
        <select id="city_select" name="city" required>
            <option value="">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</option>
        </select>
    </div>

    <div class="form-group">
      <label>Ø§Ù„Ø­ÙŠ</label>
      <input type="text" name="receiver_district" required>
    </div>
    <div class="form-group">
      <label>Ø§Ù„Ø´Ø§Ø±Ø¹</label>
      <input type="text" name="receiver_street" required>
    </div>

    <h3>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø´Ø­Ù†Ø©</h3>
    <div class="form-group">
      <label>Ø§Ù„ÙˆØ²Ù† (ÙƒØ¬Ù…)</label>
      <input type="number" id="weight" name="weight" min="1" step="0.1" required>
    </div>
    <div class="form-group">
      <label>Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (Ø±ÙŠØ§Ù„)</label>
      <input type="number" name="value" required>
    </div>
    
    <div class="form-group">
      <label>Ø´Ø±ÙƒØ© Ø§Ù„Ø´Ø­Ù†</label>
      <input type="text" id="shippingCompany" name="company" required readonly placeholder="Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„Ù„Ø§Ø®ØªÙŠØ§Ø± ğŸšš">
    </div>

    <div id="priceNote" class="note" style="font-weight: bold; font-size: 16px; color: #2e7d32; border-color: #2e7d32; background: #e8f5e9;"></div>
    <div id="weightWarning" class="warning">ğŸš¨ Ø§Ù„ÙˆØ²Ù† ØºÙŠØ± Ù…Ø³Ù…ÙˆØ­ Ù„Ø´Ø±ÙƒØ© Ø±ÙŠØ¯ Ø¨ÙˆÙƒØ³!</div>
    <div id="redboxNote" class="note">â„¹ï¸ Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙŠØ³ØªÙ„Ù… Ø§Ù„Ø´Ø­Ù†Ø© Ù…Ù† Ø£Ù‚Ø±Ø¨ Ø®Ø²Ø§Ù†Ø© (RedBox)</div>
    <div id="brolloNote" class="note">
      ğŸ“¦ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ø·Ù„Ø¨ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…: 3 Ø´Ø­Ù†Ø§Øª<br>
      <span style="color:#0066cc; cursor:pointer; text-decoration:underline;" onclick="showBranches()">ğŸ“ Ø¹Ø±Ø¶ ÙØ±ÙˆØ¹ Ø§Ù„ØªØ³Ù„ÙŠÙ…</span>
    </div>

    <button type="submit">Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø¨ÙˆÙ„ÙŠØµØ© âœ…</button>
  </form>
</div>

<div id="thankYouModal">
  <div id="thankYouModalContent">
    <div style="font-size: 50px;">ğŸ‰</div>
    <p>Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ!<br>Ø³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹ ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙˆÙ„ÙŠØµØ©.</p>
    <button onclick="closeModal()">Ø¥ØºÙ„Ø§Ù‚</button>
  </div>
</div>

<div id="branchesModal">
  <div id="branchesModalContent">
    <h3>ÙØ±ÙˆØ¹ Ø¨Ø±ÙˆÙ„Ùˆ</h3>
    <ul style="list-style:none; padding:0; line-height:2.5; text-align: right;">
      <li>ğŸ“ Ø§Ù„Ø±ÙŠØ§Ø¶</li>
      <li>ğŸ“ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©</li>
      <li>ğŸ“ Ø§Ù„Ù‚ØµÙŠÙ…</li>
      <li>ğŸ“ Ø¬Ø¯Ø©</li>
      <li>ğŸ“ Ø§Ù„Ø¯Ù…Ø§Ù…</li>
    </ul>
    <button onclick="closeBranches()">Ø¥ØºÙ„Ø§Ù‚</button>
  </div>
</div>

<div id="shippingTypeModal">
  <div id="shippingTypeContent">
    <h3>Ø§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø´Ø­Ù†</h3>
    <div class="shipping-option" onclick="showCompanyOptions('dry')">
      <div class="icon">ğŸ“¦</div>
      <div>Ø´Ø­Ù† Ø¬Ø§Ù (Ø¹Ø§Ø¯ÙŠ)</div>
    </div>
    <div class="shipping-option" onclick="showCompanyOptions('cold')">
      <div class="icon">â„ï¸</div>
      <div>Ø´Ø­Ù† Ù…Ø¨Ø±Ø¯</div>
    </div>
    <div class="shipping-option" onclick="showCompanyOptions('pickup')">
      <div class="icon">ğŸª</div>
      <div>Ø®Ø²Ø§Ù†Ø§Øª Ø°ÙƒÙŠØ©</div>
    </div>
    
    <div id="companyOptions" style="display:none; margin-top: 15px; border-top: 1px solid #eee; padding-top: 10px;">
      <div style="font-size: 14px; margin-bottom: 10px; color: #666;">Ø§Ø®ØªØ± Ø§Ù„Ø´Ø±ÙƒØ©:</div>
      <div class="company-images" id="companyButtons"></div>
    </div>
    
    <button onclick="closeShippingType()" style="background: #ccc; color: #333; margin-top: 20px;">Ø¥Ù„ØºØ§Ø¡</button>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

<script>
    /* ÙƒÙˆØ¯ Ø§Ù„Ù…Ø¯Ù† */
    document.addEventListener("DOMContentLoaded", function() {
        const citySelect = document.getElementById('city_select');
        const fileUrl = "https://1station-glitch.github.io/-/cities.json";

        fetch(fileUrl + '?v=' + new Date().getTime()) 
            .then(response => {
                if (!response.ok) throw new Error("Ø§Ù„Ù…Ù„Ù ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯");
                return response.text();
            })
            .then(textData => {
                citySelect.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©...</option>';
                let allLines = textData.split('\n');
                allLines.forEach(line => {
                    let cleanName = line.replace(/[",\[\]]/g, "").trim();
                    if (cleanName.length > 0) {
                        let option = document.createElement('option');
                        option.value = cleanName;
                        option.textContent = cleanName;
                        citySelect.appendChild(option);
                    }
                });
                $('#city_select').select2({
                    dir: "rtl",
                    placeholder: "Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©...",
                    width: '100%' 
                });
            })
            .catch(error => {
                console.error('Error:', error);
                citySelect.innerHTML = '<option value="">ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</option>';
            });
    });

    /* Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª */
    const weightInput = document.getElementById("weight");
    const companyInput = document.getElementById("shippingCompany");
    const priceNote = document.getElementById("priceNote");
    const weightWarning = document.getElementById("weightWarning");
    const redboxNote = document.getElementById("redboxNote");
    const brolloNote = document.getElementById("brolloNote");
    const form = document.getElementById("shippingForm");
    const modal = document.getElementById("thankYouModal");
    const shippingTypeModal = document.getElementById('shippingTypeModal');
    const companyOptions = document.getElementById('companyOptions');
    const companyButtons = document.getElementById('companyButtons');
    let pendingCompany = null;

    /* ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø´Ø±ÙƒØ§Øª */
    companyInput.addEventListener('click', function(e){
        e.preventDefault();
        shippingTypeModal.style.display = 'block';
        companyOptions.style.display = 'none';
        this.blur(); // Ø§Ø®ÙØ§Ø¡ Ø§Ù„ÙƒÙŠØ¨ÙˆØ±Ø¯ ÙÙŠ Ø§Ù„Ø¬ÙˆØ§Ù„
    });

    /* Ø¹Ø±Ø¶ Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ§Øª */
    function showCompanyOptions(type){
        companyOptions.style.display = 'block';
        companyButtons.innerHTML = '';

        document.querySelectorAll('.shipping-option').forEach(el => el.classList.remove('selected'));
        // Ø¥Ø¶Ø§ÙØ© ÙƒÙ„Ø§Ø³ Ø§Ù„ØªØ­Ø¯ÙŠØ¯ Ù„Ù„Ø¹Ù†ØµØ± Ø§Ù„Ù…Ø¶ØºÙˆØ·
        const options = document.querySelectorAll('.shipping-option');
        if(type === 'dry') options[0].classList.add('selected');
        if(type === 'cold') options[1].classList.add('selected');
        if(type === 'pickup') options[2].classList.add('selected');

        if(type === 'dry'){
            addCompanyBtn('aramex.png', 'aramex');
        }
        if(type === 'cold'){
            addCompanyBtn('prolo.png', 'prolo');
        }
        if(type === 'pickup'){
            addCompanyBtn('redbox.png', 'redbox');
        }
        
        // Ø³ÙƒØ±ÙˆÙ„ Ù†Ø§Ø¹Ù… Ù„Ù„Ø£Ø³ÙÙ„ ÙÙŠ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ø¹Ø´Ø§Ù† ÙŠØ´ÙˆÙ Ø§Ù„Ø´Ø±ÙƒØ§Øª
        document.getElementById('shippingTypeContent').scrollTo({ top: 1000, behavior: 'smooth' });
    }

    function addCompanyBtn(imgSrc, value) {
        const img = document.createElement('img');
        img.src = imgSrc;
        img.alt = value;
        img.onclick = () => selectCompany(value);
        companyButtons.appendChild(img);
    }

    /* Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø´Ø±ÙƒØ© - Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯ */
    function selectCompany(company){
        if(company === "aramex"){
            pendingCompany = "aramex";
            // ğŸ”¥ Ù‡Ù†Ø§ Ø§Ù„ØªØºÙŠÙŠØ±: Ø¥Ø®ÙØ§Ø¡ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± ÙÙˆØ±Ø§Ù‹ Ù‚Ø¨Ù„ Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªØ­Ø°ÙŠØ±
            shippingTypeModal.style.display = 'none'; 
            document.getElementById("aramexWarningModal").style.display = "block";
            return;
        }

        companyInput.value = company;
        shippingTypeModal.style.display = 'none';
        updatePriceNote();
    }

    function confirmAramexWarning(){
        companyInput.value = pendingCompany;
        document.getElementById("aramexWarningModal").style.display = "none";
        updatePriceNote();
    }

    function closeShippingType(){
        shippingTypeModal.style.display = 'none';
    }

    /* ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ø¹Ø± */
    function updatePriceNote() {
        const weight = Number(weightInput.value);
        const company = companyInput.value;

        priceNote.style.display = "none";
        weightWarning.style.display = "none";
        redboxNote.style.display = "none";
        brolloNote.style.display = "none";

        if (!weight || !company) return;

        let price = 0;

        if (company === "redbox") {
            redboxNote.style.display = "block";
            if (weight > 15) { weightWarning.style.display = "block"; }
            else { price = 17; }
        }

        if (company === "aramex") { 
            price = weight <= 15 ? 23 : 23 + ((weight-15)*2); 
        }

        if (company === "prolo") {
            brolloNote.style.display = "block";
            price = weight <= 15 ? 25 : 25 + ((weight-15)*2);
        }

        if (price > 0) {
            priceNote.innerHTML = `ğŸ’° Ø§Ù„Ø³Ø¹Ø±: ${price} Ø±ÙŠØ§Ù„`;
            priceNote.style.display = "block";
        }
    }

    weightInput.addEventListener("input", updatePriceNote);

    /* Ø§Ù„Ù…ÙˆØ¯Ø§Ù„Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰ */
    function closeModal(){ modal.style.display = "none"; }
    function showBranches(){ document.getElementById('branchesModal').style.display = 'block'; }
    function closeBranches(){ document.getElementById('branchesModal').style.display = 'none'; }
    });
    </script>
    
<script type="module">
  // Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…ÙƒØªØ¨Ø§Øª ÙØ§ÙŠØ±Ø¨ÙŠØ³
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  // ğŸ”´ Ø¶Ø¹ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø´Ø±ÙˆØ¹Ùƒ Ù‡Ù†Ø§ (Ø§Ù†Ø³Ø®Ù‡Ø§ Ù…Ù† Firebase Console)
  const firebaseConfig = {
    apiKey: "Ø¶Ø¹_Ø§Ù„Ù…ÙØªØ§Ø­_Ù‡Ù†Ø§",
    authDomain: "xxxx.firebaseapp.com",
    projectId: "xxxx",
    storageBucket: "xxxx.appspot.com",
    messagingSenderId: "xxxx",
    appId: "xxxx"
  };

  // ØªØ´ØºÙŠÙ„ ÙØ§ÙŠØ±Ø¨ÙŠØ³
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø¹Ù†Ø§ØµØ±
  const form = document.getElementById("shippingForm");
  const modal = document.getElementById("thankYouModal");
  const weightInput = document.getElementById("weight");
  const companyInput = document.getElementById("shippingCompany");

  // Ø¯Ø§Ù„Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø±
  form.addEventListener("submit", async function(e) {
    e.preventDefault(); // Ù…Ù†Ø¹ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø´Ø±Ø· Ø±ÙŠØ¯ Ø¨ÙˆÙƒØ³
    const weight = Number(weightInput.value);
    const company = companyInput.value;

    if (company === "redbox" && weight > 15) {
      alert("ğŸš¨ Ø§Ù„ÙˆØ²Ù† ØºÙŠØ± Ù…Ø³Ù…ÙˆØ­ Ù„Ø´Ø±ÙƒØ© Ø±ÙŠØ¯ Ø¨ÙˆÙƒØ³!");
      return;
    }

    // ØªØºÙŠÙŠØ± Ù†Øµ Ø§Ù„Ø²Ø± Ù„ÙŠØ¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ù†Ù‡ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
    const submitBtn = form.querySelector('button[type="submit"]');
    const oldText = submitBtn.innerText;
    submitBtn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...";
    submitBtn.disabled = true;

    try {
      // 1. ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø­Ù‚ÙˆÙ„
      const formData = new FormData(form);
      const data = {};
      formData.forEach((value, key) => data[key] = value);
      
      // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙˆÙ‚Øª ÙˆØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ù„Ø¨
      data.createdAt = serverTimestamp(); 
      data.status = "new"; 

      // âœ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‡Ù†Ø§: Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ Ù…Ø¬Ù…ÙˆØ¹Ø© Ø¨Ø§Ø³Ù… "Shipments"
      await addDoc(collection(db, "Shipments"), data);

      // 3. Ù†Ø¬Ø§Ø­ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
      console.log("ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ Shipments Ø¨Ù†Ø¬Ø§Ø­");
      form.reset();
      modal.style.display = "block";

    } catch (error) {
      console.error("Error:", error);
      alert("Ø­Ø¯Ø« Ø®Ø·Ø£ØŒ ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª");
    } finally {
      // Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ø²Ø± Ù„ÙˆØ¶Ø¹Ù‡ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ
      submitBtn.innerText = oldText;
      submitBtn.disabled = false;
    }
  });

  // Ø¬Ø¹Ù„ Ø¯Ø§Ù„Ø© Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ù…ØªØ§Ø­Ø© Ù„Ù„ØµÙØ­Ø©
  window.closeModal = function() {
    modal.style.display = "none";
  }
</script>

</body>
</html>



