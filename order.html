<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>1STATION</title>
<link rel="icon" type="image/png" href="station.png">
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body { font-family: 'Cairo', sans-serif; margin: 0; padding: 0; direction: rtl; min-height: 100vh; background: linear-gradient(120deg, #0f2027, #2c5364); color: #333; overflow-x: hidden; }
.container { max-width: 850px; margin: 50px auto; background: #ffffffee; padding: 50px 60px; border-radius: 25px; box-shadow: 0 20px 50px rgba(0,0,0,0.3); }
.logo-wrapper { display: flex; flex-direction: column; align-items: center; margin-bottom: 10px; }
.logo-wrapper img { width: 120px; height: 120px; border-radius: 50%; object-fit: cover; box-shadow: 0 8px 20px rgba(0,0,0,0.25); }
.brand-name { margin-top: 10px; font-size: 26px; font-weight: 700; background: linear-gradient(135deg, #6c63ff, #2c5364); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
h2 { margin-bottom: 40px; font-size: 30px; text-align: center; color: #1f1c2c; }
h3 { font-size: 22px; margin-bottom: 20px; color: #1f1c2c; text-align: center; border-bottom: 2px solid #6c63ff; padding-bottom: 5px; }

.form-group { 
  display: flex; 
  flex-direction: column; 
  align-items: center;    
  margin-bottom: 20px; 
}

label { 
  width: auto;            
  font-weight: 600; 
  font-size: 16px; 
  text-align: center;      
  margin-bottom: 5px;      
}

input, select { 
  flex: 1; 
  padding: 12px; 
  border-radius: 12px; 
  border: 1px solid #ccc; 
  font-size: 15px; 
  transition: all 0.3s ease; 
  min-width: 350px; 
}

input:focus, select:focus { outline: none; border-color: #6c63ff; box-shadow: 0 0 8px rgba(108,99,255,0.3); }
.note, .warning { width: 100%; margin: 15px 0; padding: 12px; border-radius: 12px; font-weight: bold; font-size: 15px; display: none; }
.note { background: linear-gradient(135deg, #e0f7fa, #b2ebf2); border-left: 5px solid #00acc1; color: #006064; }
.warning { background: #ffebee; border-left: 5px solid #d32f2f; color: #b71c1c; }
button { width: 60%; padding: 16px; border-radius: 12px; border: none; cursor: pointer; font-size: 16px; font-weight: bold; margin-top: 20px; background: linear-gradient(135deg, #6c63ff, #3f3d56); color: white; transition: all 0.3s ease; display: block; margin-left: auto; margin-right: auto; }
button:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(108,99,255,0.4); }

/* Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„Ø´ÙƒØ± */
#thankYouModal { display: none; position: fixed; z-index: 9999; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.7); }
#thankYouModalContent { background-color: #fff; margin: 15% auto; padding: 30px 40px; border-radius: 20px; width: 80%; max-width: 500px; text-align: center; color: #1f1c2c; box-shadow: 0 10px 25px rgba(0,0,0,0.4); }

/* Ù†Ø§ÙØ°Ø© Ø§Ù„ÙØ±ÙˆØ¹ */
#branchesModal { display:none; position:fixed; z-index:9999; left:0; top:0; width:100%; height:100%; background-color: rgba(0,0,0,0.7); }
#branchesModalContent { background:#fff; margin:10% auto; padding:30px; border-radius:20px; width:80%; max-width:400px; text-align:right; box-shadow:0 10px 25px rgba(0,0,0,0.4); color:#1f1c2c; }
#branchesModalContent ul {list-style:none; padding:0; line-height:2;}
#branchesModalContent a {color:#0066cc; text-decoration:none;}
#branchesModalContent a:hover {text-decoration:underline;}

/* Ù†Ø§ÙØ°Ø© Ø§Ø®ØªÙŠØ§Ø± Ù†ÙˆØ¹ Ø§Ù„Ø´Ø­Ù† */
#shippingTypeModal { display:none; position: fixed; z-index:9999; left:0; top:0; width:100%; height:100%; background: rgba(0,0,0,0.7);}
#shippingTypeContent { background:#fff; margin:5% auto; padding:30px; border-radius:20px; width:80%; max-width:400px; text-align:center; box-shadow:0 10px 25px rgba(0,0,0,0.4); color:#1f1c2c; max-height:90vh; overflow-y:auto;}
.shipping-option { display:flex; flex-direction:column; align-items:center; justify-content:center; border: 2px solid #6c63ff; border-radius: 20px; padding: 20px; margin: 15px 0; cursor:pointer; transition: all 0.3s ease;}
.shipping-option:hover { background: #6c63ff; color:white; transform: translateY(-3px);}
.shipping-option.selected { background:#6c63ff; color:white;}
.shipping-option .icon { font-size: 40px; margin-bottom: 10px;}
.company-images { display:flex; justify-content:center; gap:20px; margin-top:20px; flex-wrap:wrap;}
.company-images img { width:120px; height:120px; border-radius:15px; border:2px solid #6c63ff; cursor:pointer; transition:0.3s;}
.company-images img:hover { transform: scale(1.1); border-color:#3f3d56; }
</style>
</head>
<div id="aramexWarningModal" style="display:none; position:fixed; z-index:99999; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,0.7);">
  <div style="background:#fff; margin:8% auto; padding:30px; border-radius:20px; width:90%; max-width:550px; text-align:center; font-family:'Cairo',sans-serif;">
    <h3 style="margin-bottom:15px;">ØªÙ†Ø¨ÙŠÙ‡ Ù…Ù‡Ù… â€“ Ø£Ø±Ø§Ù…ÙƒØ³</h3>
    <p style="line-height:2; font-size:15px;">
      ÙŠØ±Ø¬Ù‰ ØªØºÙ„ÙŠÙ Ø§Ù„Ø´Ø­Ù†Ø© Ø¬ÙŠØ¯Ù‹Ø§ ÙˆØ·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¨ÙˆÙ„ÙŠØµØ© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø­Ù†Ø© Ù„ÙƒÙŠ Ù„Ø§ ÙŠØªÙ… Ø§Ù„Ø±ÙØ¶ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„ÙØ±Ø¹.<br><br>
      ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙˆØ¬Ù‡ Ù„Ø£Ù‚Ø±Ø¨ ÙØ±Ø¹ Ù„ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø´Ø­Ù†Ø©ØŒ ÙˆÙÙŠ Ø­Ø§Ù„ Ø£Ø±Ø¯Øª Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø´Ø­Ù†Ø© Ù…Ù† Ù…ÙˆÙ‚Ø¹Ùƒ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø´Ø±ÙƒØ© Ø£Ø±Ø§Ù…ÙƒØ³ ÙˆØ±ÙØ¹ Ø·Ù„Ø¨ Ø§Ø³ØªÙ„Ø§Ù….<br><br>
      <strong>Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„ Ù„Ø´Ø±ÙƒØ© Ø£Ø±Ø§Ù…ÙƒØ³:</strong><br>
      Ù…Ù† Ø§Ù„Ø£Ø­Ø¯ Ø¥Ù„Ù‰ Ø§Ù„Ø®Ù…ÙŠØ³: 8:30 ØµØ¨Ø§Ø­Ù‹Ø§ â€“ 4:30 Ø¹ØµØ±Ù‹Ø§<br>
      Ø§Ù„Ø³Ø¨Øª: 10 ØµØ¨Ø§Ø­Ù‹Ø§ â€“ 4 Ø¹ØµØ±Ù‹Ø§<br>
      Ø§Ù„Ø¬Ù…Ø¹Ø©: Ù…ØºÙ„Ù‚
    </p>
    <button onclick="confirmAramexWarning()" style="margin-top:15px; padding:12px 25px; border:none; border-radius:10px; background:#6c63ff; color:#fff; font-weight:bold; cursor:pointer;">
      ÙÙ‡Ù…Øª â€“ Ù…ØªØ§Ø¨Ø¹Ø©
    </button>
  </div>
</div>
<body>
<div style="padding: 20px;">
    <a href="index.html" style="text-decoration: none; color: white; font-weight: bold; font-size: 18px;">
        &#8594; Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
    </a>
</div>
<div class="container">

  <div class="logo-wrapper">
    <img src="station.png" alt="1STATION Logo">
    <div class="brand-name">1STATION</div>
  </div>

  <h2>Ø¥ØµØ¯Ø§Ø± Ø¨ÙˆÙ„ÙŠØµØ© Ø§Ù„Ø´Ø­Ù†</h2>

  <form id="shippingForm" action="https://formspree.io/f/mlgrgjgp" method="POST" target="_blank">
  
<h3>Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø±</h3>
    <div class="form-group">
      <label>Ø§Ù„Ø§Ø³Ù…</label>
      <input type="text" name="store_name" required placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ù…Ø³Ø¬Ù„">
      
      <div style="margin-top: 10px; font-size: 13px; color: #b45309; background: #fffbeb; padding: 10px; border-radius: 8px; border: 1px solid #fcd34d; text-align: center; width: 100%; max-width: 350px;">
          âš ï¸ ÙŠØ±Ø¬Ù‰ <a href="store_register.html" style="color: #b45309; text-decoration: underline; font-weight: bold;">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…ØªØ¬Ø±</a> Ù‚Ø¨Ù„ Ø§ØµØ¯Ø§Ø± Ø§Ù„Ø¨ÙˆÙ„ÙŠØµØ© Ø«Ù… ÙƒØªØ§Ø¨Ø© Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ù…Ø³Ø¬Ù„ ÙÙŠ Ø§Ù„Ø®Ø§Ù†Ø© Ø§Ø¹Ù„Ø§Ù‡
      </div>
    <h3>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„</h3>
    <div class="form-group">
      <label>Ø§Ù„Ø§Ø³Ù…</label>
      <input type="text" name="receiver_name" required>
    </div>
    <div class="form-group">
      <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
      <input type="tel" name="receiver_phone" pattern="[0-9]*" inputmode="numeric" required>
    </div>
    
	<div class="form-group">
    <label for="city_select" style="display:block; margin-bottom:5px; font-weight:bold;">Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©:</label>
    <select id="city_select" name="city" style="width: 100%; padding: 10px;" required>
        <option value="">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¯Ù†...</option>
    </select>
</div>

    <div class="form-group">
      <label>Ø§Ù„Ø­ÙŠ</label>
      <input type="text" name="receiver_district" required>
    </div>
    <div class="form-group">
      <label>Ø§Ù„Ø´Ø§Ø±Ø¹</label>
      <input type="text" name="receiver_street" required>
    </div>

    <h3>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø´Ø­Ù†Ø©</h3>
    <div class="form-group">
      <label>ÙˆØ²Ù† Ø§Ù„Ø´Ø­Ù†Ø© (ÙƒØ¬Ù…)</label>
      <input type="number" id="weight" name="weight" min="1" required>
    </div>
    <div class="form-group">
      <label>Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (Ø±ÙŠØ§Ù„)</label>
      <input type="number" name="value" required>
    </div>
    <div class="form-group">
      <label>Ø´Ø±ÙƒØ© Ø§Ù„Ø´Ø­Ù†</label>
      <input type="text" id="shippingCompany" name="company" required readonly placeholder="Ø§Ø¶ØºØ· Ù„Ù„Ø§Ø®ØªÙŠØ§Ø±">
    </div>

    <div id="priceNote" class="note"></div>
    <div id="weightWarning" class="warning">ğŸš¨ Ø§Ù„ÙˆØ²Ù† ØºÙŠØ± Ù…Ø³Ù…ÙˆØ­ Ù„Ø´Ø±ÙƒØ© Ø±ÙŠØ¯ Ø¨ÙˆÙƒØ³!</div>
    <div id="redboxNote" class="note">
      ÙŠØ±Ø¬Ù‰ ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø´Ø­Ù†Ø© Ù„Ø§Ù‚Ø±Ø¨ Ù†Ù‚Ø·Ø© Ø§Ø³ØªÙ„Ø§Ù… ÙˆØ§Ù„Ø¹Ù…ÙŠÙ„ ÙŠÙ‚ÙˆÙ… Ø¨Ø§Ø³ØªÙ„Ø§Ù…Ù‡ Ù…Ù† Ø§Ù‚Ø±Ø¨ Ù…Ø­Ø·Ø© Ø·Ø±ÙˆØ¯ ÙÙŠ Ù…Ø¯ÙŠÙ†ØªÙ‡
    </div>
    <div id="brolloNote" class="note">
      ğŸ“¦ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ø·Ù„Ø¨ Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø´Ø­Ù†Ø§Øª Ù…Ù† Ø§Ù„Ù…ØªØ¬Ø± Ù‡Ùˆ 3  
      Ø¥Ø°Ø§ ÙƒØ§Ù† Ø£Ù‚Ù„ Ù…Ù† Ø°Ù„Ùƒ ÙŠØ±Ø¬Ù‰ ØªØ³Ù„ÙŠÙ…Ù‡Ø§ Ù„Ø£Ù‚Ø±Ø¨ ÙØ±Ø¹  
      <span style="color:#0066cc; cursor:pointer; text-decoration:underline;" onclick="showBranches()">Ø¹Ø±Ø¶ Ø§Ù„ÙØ±ÙˆØ¹</span>
    </div>

    <button type="submit">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
  </form>
</div>

<div id="thankYouModal">
  <div id="thankYouModalContent">
    <p>ğŸ‰ Ø´ÙƒØ±Ø§ Ù„Ùƒ Ø¹Ù„Ù‰ ØªØ¹Ø§Ù…Ù„Ùƒ Ù…Ø¹ 1STATION<br>
    Ø³Ù†Ù‚ÙˆÙ… Ø¨Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹ ÙˆØ§Ø³ØªÙ„Ø§Ù… Ø¨ÙˆÙ„ÙŠØµØ© Ø§Ù„Ø´Ø­Ù†<br>
    ğŸ“ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ: 0567241689</p>
    <button onclick="closeModal()">Ø§ØºÙ„Ø§Ù‚</button>
  </div>
</div>

<div id="branchesModal">
  <div id="branchesModalContent">
    <h3>ÙØ±ÙˆØ¹ Ø¨Ø±ÙˆÙ„Ùˆ</h3>
    <ul>
      <li><a href="https://goo.gl/maps/riyadh-branch" target="_blank">ÙØ±Ø¹ Ø§Ù„Ø±ÙŠØ§Ø¶</a></li>
      <li><a href="https://goo.gl/maps/medina-branch" target="_blank">ÙØ±Ø¹ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©</a></li>
      <li><a href="https://goo.gl/maps/qassim-branch" target="_blank">ÙØ±Ø¹ Ø§Ù„Ù‚ØµÙŠÙ…</a></li>
      <li><a href="https://goo.gl/maps/jeddah-branch" target="_blank">ÙØ±Ø¹ Ø¬Ø¯Ø©</a></li>
      <li><a href="https://goo.gl/maps/dammam-branch" target="_blank">ÙØ±Ø¹ Ø§Ù„Ø¯Ù…Ø§Ù…</a></li>
    </ul>
    <button onclick="closeBranches()">Ø§ØºÙ„Ø§Ù‚</button>
  </div>
</div>

<div id="shippingTypeModal">
  <div id="shippingTypeContent">
    <h3>Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø´Ø­Ù†</h3>
    <div class="shipping-option" onclick="showCompanyOptions('dry')">
      <div class="icon">ğŸ“¦</div>
      <div>Ø§Ù„Ø´Ø­Ù† Ø§Ù„Ø¬Ø§Ù</div>
    </div>
    <div class="shipping-option" onclick="showCompanyOptions('cold')">
      <div class="icon">â„ï¸</div>
      <div>Ø§Ù„Ø´Ø­Ù† Ø§Ù„Ù…Ø¨Ø±Ø¯</div>
    </div>
    <div class="shipping-option" onclick="showCompanyOptions('pickup')">
      <div class="icon">ğŸª</div>
      <div>Ù…Ø­Ø·Ø§Øª Ø§Ù„Ø·Ø±ÙˆØ¯</div>
    </div>
    <div id="companyOptions" style="display:none;">
      <div class="company-images" id="companyButtons"></div>
    </div>
    <button onclick="closeShippingType()">Ø¥ØºÙ„Ø§Ù‚</button>
  </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        const citySelect = document.getElementById('city_select');

        // Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ù„Ù Ù…Ø¹ ÙƒÙˆØ¯ ÙŠÙ…Ù†Ø¹ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª (Ø¹Ø´Ø§Ù† ÙŠØ¬ÙŠØ¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯ ØºØµØ¨)
        fetch('./cities.json?v=' + new Date().getTime()) 
            .then(response => {
                if (!response.ok) throw new Error("Ø§Ù„Ù…Ù„Ù ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯");
                return response.text(); // Ù†Ø¬ÙŠØ¨Ù‡ ÙƒÙ†Øµ Ø®Ø§Ø§Ø§Ø§Ù…
            })
            .then(textData => {
                citySelect.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©...</option>';

                // 1. Ù†Ù‚Ø³Ù… Ø§Ù„Ù†Øµ Ù„Ø³Ø·ÙˆØ±
                let allLines = textData.split('\n');

                // 2. Ù†Ø­Ø°Ù Ø§Ù„Ø³Ø·Ø± Ø§Ù„Ø£ÙˆÙ„ ÙˆØ§Ù„Ø£Ø®ÙŠØ± ÙÙ‚Ø·
                // (Ø¯Ø§Ù„Ø© slice(1, -1) ØªØ¹Ù†ÙŠ: Ø§Ø¨Ø¯Ø£ Ù…Ù† Ø§Ù„Ø³Ø·Ø± Ø§Ù„Ø«Ø§Ù†ÙŠØŒ ÙˆØªÙˆÙ‚Ù Ù‚Ø¨Ù„ Ø§Ù„Ø³Ø·Ø± Ø§Ù„Ø£Ø®ÙŠØ± Ø¨ÙˆØ§Ø­Ø¯)
                if (allLines.length > 2) {
                    let cityLines = allLines.slice(1, -1);

                    // 3. Ù†Ù„Ù Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø·ÙˆØ± Ø§Ù„Ù„ÙŠ Ø¨Ù‚ÙŠØª
                    cityLines.forEach(line => {
                        // ØªÙ†Ø¸ÙŠÙ: Ù†Ø­Ø°Ù Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„ØªÙ†ØµÙŠØµ " ÙˆÙ†Ø­Ø°Ù Ø§Ù„ÙØ§ØµÙ„Ø© , ÙˆÙ†Ø­Ø°Ù Ø§Ù„Ù…Ø³Ø§ÙØ§Øª Ø§Ù„Ø²Ø§ÙŠØ¯Ø©
                        let cleanName = line.replace(/[",]/g, "").trim();

                        // Ø´Ø±Ø· Ø¨Ø³ÙŠØ·: Ø¥Ø°Ø§ Ø§Ù„Ø³Ø·Ø± Ù…Ùˆ ÙØ§Ø¶ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„ØªÙ†Ø¸ÙŠÙØŒ Ø§Ø¹Ø±Ø¶Ù‡
                        if (cleanName.length > 0) {
                            let option = document.createElement('option');
                            option.value = cleanName;
                            option.textContent = cleanName;
                            citySelect.appendChild(option);
                        }
                    });

                    // ØªÙØ¹ÙŠÙ„ Select2
                    if (typeof $ !== 'undefined' && $.fn.select2) {
                        $('#city_select').select2({ dir: "rtl", placeholder: "Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©..." });
                    }

                } else {
                    console.error("Ø§Ù„Ù…Ù„Ù ÙØ§Ø¶ÙŠ Ø£Ùˆ ÙÙŠÙ‡ Ø³Ø·Ø±ÙŠÙ† Ø¨Ø³");
                }
            })
            .catch(error => {
                console.error('Error:', error);
                citySelect.innerHTML = '<option value="">ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</option>';
            });
    });
</script>
	
<script>
const weightInput = document.getElementById("weight");
const companyInput = document.getElementById("shippingCompany");
const priceNote = document.getElementById("priceNote");
const weightWarning = document.getElementById("weightWarning");
const redboxNote = document.getElementById("redboxNote");
const brolloNote = document.getElementById("brolloNote");
const form = document.getElementById("shippingForm");
const modal = document.getElementById("thankYouModal");
const shippingTypeModal = document.getElementById('shippingTypeModal');
const companyOptions = document.getElementById('companyOptions');
const companyButtons = document.getElementById('companyButtons');

// Ø­Ø³Ø§Ø¨ Ø§Ù„Ø³Ø¹Ø±
function updatePriceNote() {
  const weight = Number(weightInput.value);
  const company = companyInput.value;

  priceNote.style.display = "none";
  weightWarning.style.display = "none";
  redboxNote.style.display = "none";
  brolloNote.style.display = "none";

  if (!weight || !company) return;

  let price = 0;

  if (company === "redbox") {
    redboxNote.style.display = "block";
    if (weight > 15) { weightWarning.style.display = "block"; }
    else { price = 17; }
  }

  if (company === "aramex") { price = weight <= 15 ? 23 : 23 + ((weight-15)*2); }

  if (company === "prolo") {
    brolloNote.style.display = "block";
    price = weight <= 15 ? 25 : 25 + ((weight-15)*2);
  }

  if (price > 0) {
    priceNote.innerHTML = `ğŸ’° Ø§Ù„Ø³Ø¹Ø±: ${price} Ø±ÙŠØ§Ù„`;
    priceNote.style.display = "block";
  }
}

weightInput.addEventListener("input", updatePriceNote);
companyInput.addEventListener("input", updatePriceNote);

// Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
form.addEventListener("submit", function(e){
  e.preventDefault();
  const weight = Number(weightInput.value);
  const company = companyInput.value;

  if(company === "redbox" && weight > 15){
    alert("ğŸš¨ Ø§Ù„ÙˆØ²Ù† ØºÙŠØ± Ù…Ø³Ù…ÙˆØ­ Ù„Ø´Ø±ÙƒØ© Ø±ÙŠØ¯ Ø¨ÙˆÙƒØ³!");
    return;
  }

  modal.style.display = "block";
  setTimeout(() => { form.submit(); }, 2000);
});

// Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„Ø´ÙƒØ±
function closeModal(){ modal.style.display = "none"; }

// ÙØ±ÙˆØ¹ Ø¨Ø±ÙˆÙ„Ùˆ
function showBranches(){ document.getElementById('branchesModal').style.display = 'block'; }
function closeBranches(){ document.getElementById('branchesModal').style.display = 'none'; }

// Ù…ÙˆØ¯Ø§Ù„ Ø§Ø®ØªÙŠØ§Ø± Ù†ÙˆØ¹ Ø§Ù„Ø´Ø­Ù†
let selectedType = null;

companyInput.addEventListener('focus', function(e){
  e.preventDefault();
  shippingTypeModal.style.display = 'block';
  companyOptions.style.display = 'none';
});

function showCompanyOptions(type){
  companyOptions.style.display = 'block';
  companyButtons.innerHTML = '';

  document.querySelectorAll('.shipping-option').forEach(el => el.classList.remove('selected'));
  const typeDiv = document.querySelector(`.shipping-option[onclick="showCompanyOptions('${type}')"]`);
  typeDiv.classList.add('selected');
  selectedType = type;

  if(type === 'dry'){
    const aramexImg = document.createElement('img');
    aramexImg.src = 'aramex.png';
    aramexImg.alt = 'Ø£Ø±Ø§Ù…ÙƒØ³';
    aramexImg.onclick = () => selectCompany('aramex');
    companyButtons.appendChild(aramexImg);
  }

  if(type === 'cold'){
    const proloImg = document.createElement('img');
    proloImg.src = 'prolo.png';
    proloImg.alt = 'Ø¨Ø±ÙˆÙ„Ùˆ';
    proloImg.onclick = () => selectCompany('prolo');
    companyButtons.appendChild(proloImg);
  }

  if(type === 'pickup'){
    const redboxImg = document.createElement('img');
    redboxImg.src = 'redbox.png';
    redboxImg.alt = 'Ø±ÙŠØ¯ Ø¨ÙˆÙƒØ³';
    redboxImg.onclick = () => selectCompany('redbox');
    companyButtons.appendChild(redboxImg);
  }

  companyButtons.scrollIntoView({behavior:'smooth', block:'start'});
}

let pendingCompany = null;

function selectCompany(company){
  if(company === "aramex"){
    pendingCompany = "aramex";
    document.getElementById("aramexWarningModal").style.display = "block";
    return;
  }

  companyInput.value = company;
  shippingTypeModal.style.display = 'none';
  updatePriceNote();
}

function closeShippingType(){
  shippingTypeModal.style.display = 'none';
}
function confirmAramexWarning(){
  companyInput.value = pendingCompany;
  document.getElementById("aramexWarningModal").style.display = "none";
  shippingTypeModal.style.display = 'none';
  updatePriceNote();
}

// âœ… ÙƒÙˆØ¯ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø¯Ù† (Ù…Ø¯Ù…Ø¬)
async function loadCities() {
    try {
        const response = await fetch('cities.json'); 
        const cities = await response.json(); 
        const selectElement = document.getElementById('receiverCity'); // Ù†Ø¹Ø¨Ø¦ Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„
        
        cities.forEach(city => {
            const option = document.createElement('option');
            const cityName = city.name_ar || city.name; 
            option.value = cityName;
            option.text = cityName;
            selectElement.appendChild(option);
        });
        console.log("âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¯Ù† Ø¨Ù†Ø¬Ø§Ø­");
    } catch (error) {
        console.error("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¯Ù†:", error);
    }
}

// ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¯Ø§Ù„Ø©
loadCities();

</script>

</body>

</html>






